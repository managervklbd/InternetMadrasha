[1/27/2026, 5:26:22 PM] SUCCESS CALLBACK - Data: {"tran_id":"REG-cmkwifz9c0006s1sgguiov3ne-1769513153675","val_id":"260127172609At7x4Fk9NrTQmy9","amount":"0.00","card_type":"BKASH-BKash","store_amount":"0.00","card_no":"","bank_tran_id":"260127172609IpGkvy6Lp4VgU8N","status":"VALID","tran_date":"2026-01-27 17:25:51","error":"","currency":"BDT","card_issuer":"BKash Mobile Banking","card_brand":"MOBILEBANKING","card_sub_brand":"Classic","card_issuer_country":"Bangladesh","card_issuer_country_code":"BD","store_id":"maxte696cc56a023b1","verify_sign":"57845cca785ce7a8f39e50cd67f8d60d","verify_key":"amount,bank_tran_id,base_fair,card_brand,card_issuer,card_issuer_country,card_issuer_country_code,card_no,card_sub_brand,card_type,currency,currency_amount,currency_rate,currency_type,error,risk_level,risk_title,status,store_amount,store_id,tran_date,tran_id,val_id,value_a,value_b,value_c,value_d","verify_sign_sha2":"c75cc22c809185ca74392aaa94b6b973397fb3ea004e5af6d099ae63a19c6edc","currency_type":"BDT","currency_amount":"0.00","currency_rate":"1.0000","base_fair":"0.00","value_a":"cmkwifz9c0006s1sgguiov3ne","value_b":"REGISTRATION","value_c":"","value_d":"","subscription_id":"","risk_level":"0","risk_title":"Safe"}
[1/27/2026, 5:26:22 PM] Step 1: Validating val_id 260127172609At7x4Fk9NrTQmy9 for Invoices: cmkwifz9c0006s1sgguiov3ne
[1/27/2026, 5:26:24 PM] Step 2: Validation Data Received - Card: BKASH-BKash
[1/27/2026, 5:26:24 PM] Step 3: DB Transaction Started for 1 Invoices
[1/27/2026, 5:26:24 PM] Payment Type: REGISTRATION
[1/27/2026, 5:26:27 PM] Activating Student: cmkwifyb40002s1sgit9xbs9t
[1/27/2026, 5:26:29 PM] Step 4: DB Transaction Complete
[1/27/2026, 5:26:29 PM] CRITICAL ERROR: Transaction API error: Transaction not found. Transaction ID is invalid, refers to an old closed transaction Prisma doesn't have information about anymore, or was obtained before disconnecting.
PrismaClientKnownRequestError: Transaction API error: Transaction not found. Transaction ID is invalid, refers to an old closed transaction Prisma doesn't have information about anymore, or was obtained before disconnecting.
    at _r.transaction (C:\Users\USER\Downloads\Project\InternetMadrasha\node_modules\@prisma\client\runtime\library.js:111:12319)
    at async Proxy._transactionWithCallback (C:\Users\USER\Downloads\Project\InternetMadrasha\node_modules\@prisma\client\runtime\library.js:130:8034)
    at async POST (webpack-internal:///(rsc)/./src/app/api/payment/success/route.ts:56:9)
    at async AppRouteRouteModule.do (C:\Users\USER\Downloads\Project\InternetMadrasha\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:5:38696)
    at async AppRouteRouteModule.handle (C:\Users\USER\Downloads\Project\InternetMadrasha\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:5:45978)
    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fpayment%2Fsuccess%2Froute&page=%2Fapi%2Fpayment%2Fsuccess%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpayment%2Fsuccess%2Froute.ts&appDir=C%3A%5CUsers%5CUSER%5CDownloads%5CProject%5CInternetMadrasha%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUSER%5CDownloads%5CProject%5CInternetMadrasha&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)
    at async AppRouteRouteModule.handleResponse (C:\Users\USER\Downloads\Project\InternetMadrasha\node_modules\next\dist\compiled\next-server\app-route.runtime.dev.js:1:187565)
    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fpayment%2Fsuccess%2Froute&page=%2Fapi%2Fpayment%2Fsuccess%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpayment%2Fsuccess%2Froute.ts&appDir=C%3A%5CUsers%5CUSER%5CDownloads%5CProject%5CInternetMadrasha%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUSER%5CDownloads%5CProject%5CInternetMadrasha&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)
    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fpayment%2Fsuccess%2Froute&page=%2Fapi%2Fpayment%2Fsuccess%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpayment%2Fsuccess%2Froute.ts&appDir=C%3A%5CUsers%5CUSER%5CDownloads%5CProject%5CInternetMadrasha%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUSER%5CDownloads%5CProject%5CInternetMadrasha&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)
    at async DevServer.renderToResponseWithComponentsImpl (C:\Users\USER\Downloads\Project\InternetMadrasha\node_modules\next\dist\server\base-server.js:1422:9)
    at async DevServer.renderPageComponent (C:\Users\USER\Downloads\Project\InternetMadrasha\node_modules\next\dist\server\base-server.js:1474:24)
    at async DevServer.renderToResponseImpl (C:\Users\USER\Downloads\Project\InternetMadrasha\node_modules\next\dist\server\base-server.js:1514:32)
    at async DevServer.pipeImpl (C:\Users\USER\Downloads\Project\InternetMadrasha\node_modules\next\dist\server\base-server.js:1025:25)
    at async NextNodeServer.handleCatchallRenderRequest (C:\Users\USER\Downloads\Project\InternetMadrasha\node_modules\next\dist\server\next-server.js:393:17)
    at async DevServer.handleRequestImpl (C:\Users\USER\Downloads\Project\InternetMadrasha\node_modules\next\dist\server\base-server.js:916:17)
    at async C:\Users\USER\Downloads\Project\InternetMadrasha\node_modules\next\dist\server\dev\next-dev-server.js:399:20
    at async Span.traceAsyncFn (C:\Users\USER\Downloads\Project\InternetMadrasha\node_modules\next\dist\trace\trace.js:157:20)
    at async DevServer.handleRequest (C:\Users\USER\Downloads\Project\InternetMadrasha\node_modules\next\dist\server\dev\next-dev-server.js:395:24)
    at async invokeRender (C:\Users\USER\Downloads\Project\InternetMadrasha\node_modules\next\dist\server\lib\router-server.js:240:21)
    at async handleRequest (C:\Users\USER\Downloads\Project\InternetMadrasha\node_modules\next\dist\server\lib\router-server.js:437:24)
    at async requestHandlerImpl (C:\Users\USER\Downloads\Project\InternetMadrasha\node_modules\next\dist\server\lib\router-server.js:485:13)
    at async Server.requestListener (C:\Users\USER\Downloads\Project\InternetMadrasha\node_modules\next\dist\server\lib\start-server.js:226:13)
